{"version":3,"sources":["webpack:///C:/Users/Idler/Documents/HBuilderProjects/iKu/components/common/wxParse/components/wxParseImg.vue?06f9","webpack:///C:/Users/Idler/Documents/HBuilderProjects/iKu/components/common/wxParse/components/wxParseImg.vue?f009","webpack:///C:/Users/Idler/Documents/HBuilderProjects/iKu/components/common/wxParse/components/wxParseImg.vue?4532","webpack:///C:/Users/Idler/Documents/HBuilderProjects/iKu/components/common/wxParse/components/wxParseImg.vue?2fa3","uni-app:///components/common/wxParse/components/wxParseImg.vue"],"names":["renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","name","data","newStyleStr","preview","props","node","type","Object","default","methods","wxParseImgTap","src","$host","e","wxParseImgLoad","wxAutoImageCal","console","log","originalWidth","originalHeight","removeImageUrl","windowWidth","results","imageWidth","imageheight"],"mappings":";;;;2DAAA,0NACIA,EADJ,iLAQIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,sDACZ,aAAAF,E;;;;2GCtBf,wrC;;;;2GCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G;;;;2DCRvB,4yBAAovB,eAAG,G;;;;mICevvB,CACEC,KAAM,aACNC,KAFF,WAGI,MAAO,CACLC,YAAa,GACbC,SAAS,IAGbC,MAAO,CACLC,KAAM,CACJC,KAAMC,OACNC,QAFN,WAGQ,MAAO,MAIbC,QAAS,CACPC,cADJ,SACA,GACM,GAAKlB,KAAKW,QAAV,CADN,IAEM,EAAN,qBACWQ,GACLnB,KAAKa,KAAKO,MAAMT,QAAQQ,EAAKE,KAG/BC,eARJ,SAQA,OACM,EAAN,qBACM,GAAKH,EAAL,CAFN,MAGM,EAAN,SAHA,EAGA,QAHA,EAGA,OACA,2BACM,EAAN,6BALA,EAMM,KAAN,YANA,EAMA,UANA,EAMA,KACM,EAAN,mBACA,+CACMnB,KAAKU,YAAc,GAAzB,oFAGIa,eApBJ,SAoBA,SAEA,yBACA,oCACA,KAIM,GAFAC,QAAQC,IAAIzB,KAAKa,MAEba,EAAgB,IAAMC,EAAiB,GAAI,CAAC,IAC9C,EAAR,mBACQ3B,KAAKa,KAAKO,MAAMQ,eAAeT,GAC/BnB,KAAKW,SAAU,EAcjB,OAVIe,EAAgBG,GAElBC,EAAQC,WAAaF,EACrBC,EAAQE,YAAcH,GAAeF,EAAiBD,KAGtDI,EAAQC,WAAaL,EACrBI,EAAQE,YAAcL,GAGjBG,K","file":"components/common/wxParse/components/wxParseImg.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./wxParseImg.vue?vue&type=template&id=505d28c4&\"\nvar renderjs\nimport script from \"./wxParseImg.vue?vue&type=script&lang=js&\"\nexport * from \"./wxParseImg.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/common/wxParse/components/wxParseImg.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wxParseImg.vue?vue&type=template&id=505d28c4&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wxParseImg.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wxParseImg.vue?vue&type=script&lang=js&\"","<template>\r\n  <image\r\n    :mode=\"node.attr.mode\"\r\n    :lazy-load=\"node.attr.lazyLoad\"\r\n    :class=\"node.classStr\"\r\n    :style=\"newStyleStr || node.styleStr\"\r\n    :data-src=\"node.attr.src\"\r\n    :src=\"node.attr.src\"\r\n    @tap=\"wxParseImgTap\"\r\n    @load=\"wxParseImgLoad\"\r\n    />\r\n</template>\r\n\r\n<script>\r\n/* eslint-disable */\r\nexport default {\r\n  name: 'wxParseImg',\r\n  data() {\r\n    return {\r\n      newStyleStr: '',\r\n      preview: true,\r\n    };\r\n  },\r\n  props: {\r\n    node: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      },\r\n    },\r\n  },\r\n  methods: {\r\n    wxParseImgTap(e) {\r\n      if (!this.preview) return;\r\n      const { src } = e.target.dataset;\r\n      if (!src) return;\r\n      this.node.$host.preview(src, e);\r\n    },\r\n    // 图片视觉宽高计算函数区\r\n    wxParseImgLoad(e) {\r\n      const { src } = e.target.dataset;\r\n      if (!src) return;\r\n      const { width, height } = e.detail;\r\n      const recal = this.wxAutoImageCal(width, height);\r\n      const { imageheight, imageWidth } = recal;\r\n      const { padding, mode } = this.node.attr;\r\n      const { styleStr } = this.node;\r\n      const imageHeightStyle = mode === 'widthFix' ? '' : `height: ${imageheight}px;`;\r\n      this.newStyleStr = `${styleStr}; ${imageHeightStyle}; width: ${imageWidth}px; padding: 0 ${+padding}px;`;\r\n    },\r\n    // 计算视觉优先的图片宽高\r\n    wxAutoImageCal(originalWidth, originalHeight) {\r\n      // 获取图片的原始长宽\r\n      const { padding } = this.node.attr;\r\n      const windowWidth = this.node.$host.$parent.width - (2 * padding);\r\n      const results = {};\r\n\r\n      console.log(this.node)\r\n\r\n      if (originalWidth < 60 || originalHeight < 60) {\r\n        const { src } = this.node.attr;\r\n        this.node.$host.removeImageUrl(src);\r\n        this.preview = false;\r\n      }\r\n\r\n      // 判断按照那种方式进行缩放\r\n      if (originalWidth > windowWidth) {\r\n        // 在图片width大于手机屏幕width时候\r\n        results.imageWidth = windowWidth;\r\n        results.imageheight = windowWidth * (originalHeight / originalWidth);\r\n      } else {\r\n        // 否则展示原来的数据\r\n        results.imageWidth = originalWidth;\r\n        results.imageheight = originalHeight;\r\n      }\r\n\r\n      return results;\r\n    },\r\n  },\r\n};\r\n</script>\r\n"],"sourceRoot":""}