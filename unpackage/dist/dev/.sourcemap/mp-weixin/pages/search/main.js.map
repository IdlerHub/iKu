{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/Idler/Documents/HBuilderProjects/iKu/pages/search/main.vue?2f0d","webpack:///C:/Users/Idler/Documents/HBuilderProjects/iKu/pages/search/main.vue?9132","webpack:///C:/Users/Idler/Documents/HBuilderProjects/iKu/pages/search/main.vue?625a","webpack:///C:/Users/Idler/Documents/HBuilderProjects/iKu/pages/search/main.vue?647d","uni-app:///pages/search/main.vue","webpack:///C:/Users/Idler/Documents/HBuilderProjects/iKu/pages/search/main.vue?8b74"],"names":["createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","Search","Tab","NoData","ProductItem","ConsultantItem","ClassItem","data","type","search_val","tabs","tab_index","placeholders","placeholder","products","list","page","total_pages","limit","consultants","classes","target_name","computed","tab_list","target","val","onLoad","Object","assign","$options","mounted","Number","$root","$mp","query","methods","clickTab","length","search","onSearch","loadMore","onReachBottom"],"mappings":";;;;wEAAA,qBACA,sBACA,0C,mDACAA,EAAWC,a;;;;2DCHX,0SACIC,EADJ,2KASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,wBACZ,aAAAF,E;;;;2GCvBf,ypC;;;;2GCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G;;;;2DCRvB,uwBAAgtB,eAAG,G;;;;kzDCqCntB,CACEV,WAAY,CACVW,OAAJ,EACIC,IAAJ,EACIC,OAAJ,EACIC,YAAJ,EACIC,eAAJ,EACIC,UAAJ,GAEEC,KATF,WAUI,MAAO,CACLC,KAAM,EACNC,WAAY,GACZC,KAAM,CACN,CACA,CACE,KAAR,KACQ,KAAR,EACQ,OAAR,YAEM,CACE,KAAR,KACQ,KAAR,EACQ,OAAR,eAEM,CACE,KAAR,KACQ,KAAR,EACQ,OAAR,YAGM,CACA,CACE,KAAR,KACQ,KAAR,EACQ,OAAR,aAGM,CACA,CACE,KAAR,KACQ,KAAR,EACQ,OAAR,eAEM,CACE,KAAR,KACQ,KAAR,EACQ,OAAR,aAIMC,UAAW,EACXC,aAAc,CACd,aACA,KACA,WAEAC,YAAa,GACbC,SAAU,CACRC,KAAM,GACNC,KAAM,EACNC,YAAa,EACbC,MAAO,IAETC,YAAa,CACXJ,KAAM,GACNC,KAAM,EACNC,YAAa,EACbC,MAAO,IAETE,QAAS,CACPL,KAAM,GACNC,KAAM,EACNC,YAAa,EACbC,MAAO,IAETG,YAAa,KAGjBC,SAAU,CACRC,SAAU,WACR,OAAO9B,KAAKiB,KAAKjB,KAAKe,OAExBgB,OAAQ,WACN,IAAN,uCAEM,OADA/B,KAAK4B,YAAcI,EACZhC,KAAKgC,KAGhBC,OAzFF,WA0FIC,OAAOC,OAAOnC,KAAMA,KAAKoC,SAAStB,SAEpCuB,QA5FF,WA6FIrC,KAAKe,KAAOuB,OAAOtC,KAAKuC,MAAMC,IAAIC,MAAM1B,MACxCf,KAAKoB,YAAcpB,KAAKmB,aAAanB,KAAKe,OAE5C2B,QAAS,CACPC,SADJ,SACA,GACU3C,KAAKgB,YACyB,IAA5BhB,KAAK+B,OAAOT,KAAKsB,QACnB5C,KAAK6C,UAIXC,SARJ,SAQA,GAEU9C,KAAKgB,aAAegB,IACtBhC,KAAKgB,WAAagB,EAClBhC,KAAKqB,SAASC,KAAO,GACrBtB,KAAK0B,YAAYJ,KAAO,GACxBtB,KAAK2B,QAAQL,KAAO,GACpBtB,KAAK6C,WAGT,OAlBJ,WAkBA,4IACA,iFACA,qBACA,GACA,aACA,MACA,sBACA,mBACA,sBAEA,WACA,gBAXA,SAaA,SAbA,OAaA,EAbA,OAcA,UACA,SACA,0BACA,4CAEA,qDAEA,oCAEA,gBAvBA,8CA0BIE,SA5CJ,WA6CU/C,KAAK+B,OAAOP,YAAcxB,KAAK+B,OAAOR,OACxCvB,KAAK+B,OAAOR,OACZvB,KAAK6C,YAIXG,cAnJF,WAoJIhD,KAAK+C,a;;;;2DCzLT,62CAA+zC,eAAG,G","file":"pages/search/main.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/search/main.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./main.vue?vue&type=template&id=d7114c52&scoped=true&\"\nvar renderjs\nimport script from \"./main.vue?vue&type=script&lang=js&\"\nexport * from \"./main.vue?vue&type=script&lang=js&\"\nimport style0 from \"./main.vue?vue&type=style&index=0&id=d7114c52&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d7114c52\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/search/main.vue\"\nexport default component.exports","export * from \"-!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=template&id=d7114c52&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js&\"","<template>\r\n\t<div class=\"search\">\r\n\t\t<div class=\"top-fixed\">\r\n\t\t\t<Search :placeholder=\"placeholder\" @search=\"onSearch\"></Search>\r\n\t\t\t<template v-if=\"type === 0 || type === 2\">\r\n\t\t\t\t<Tab @clickTab=\"clickTab\" :tab_list=\"tab_list\" :tab_index.sync=\"tab_index\"></Tab>\r\n\t\t\t</template>\r\n\t\t</div>\r\n\t\t<div class=\"search-height\"></div>\r\n\t\t<div class=\"tab-height\" v-if=\"type === 0 || type === 2\"></div>\r\n    <div class=\"list\" v-if=\"target.list.length > 0\">\r\n      <div v-for=\"(item, index) in target.list\" :key=\"index\">\r\n        <template v-if=\"target_name === 'products'\">\r\n          <ProductItem :item=\"item\"></ProductItem>\r\n        </template>\r\n        <template v-if=\"target_name === 'consultants'\">\r\n          <ConsultantItem :item=\"item\"></ConsultantItem>\r\n        </template>\r\n        <template v-if=\"target_name === 'classes'\">\r\n          <ClassItem :item=\"item\"></ClassItem>\r\n        </template>\r\n      </div>\r\n    </div>\r\n\t\t<template v-if=\"target.list.length === 0\">\r\n\t\t\t<NoData></NoData>\r\n\t\t</template>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport Search from '@/components/common/search/search-input'\r\nimport Tab from '@/components/common/tab/tab'\r\nimport NoData from '@/components/common/no-data/no-search'\r\nimport ProductItem from '@/components/common/card/goods'\r\nimport ConsultantItem from '@/components/common/card/consults'\r\nimport ClassItem from '@/components/common/card/course'\r\n\r\nexport default {\r\n  components: {\r\n    Search,\r\n    Tab,\r\n    NoData,\r\n    ProductItem,\r\n    ConsultantItem,\r\n    ClassItem\r\n  },\r\n  data () {\r\n    return {\r\n      type: 0, // 0: 全部（首页）1：产品（分类） 2：顾问，课堂（课堂）\r\n      search_val: '', // 搜索内容\r\n      tabs: [\r\n        [\r\n          {\r\n            name: '产品',\r\n            type: 1,\r\n            target: 'products'\r\n          },\r\n          {\r\n            name: '顾问',\r\n            type: 2,\r\n            target: 'consultants'\r\n          },\r\n          {\r\n            name: '课堂',\r\n            type: 3,\r\n            target: 'classes'\r\n          }\r\n        ],\r\n        [\r\n          {\r\n            name: '产品',\r\n            type: 1,\r\n            target: 'products'\r\n          }\r\n        ],\r\n        [\r\n          {\r\n            name: '顾问',\r\n            type: 2,\r\n            target: 'consultants'\r\n          },\r\n          {\r\n            name: '课堂',\r\n            type: 3,\r\n            target: 'classes'\r\n          }\r\n        ]\r\n      ],\r\n      tab_index: 0, // 当前tab\r\n      placeholders: [\r\n        '产品、服务专员、课堂',\r\n        '产品',\r\n        '服务专员、课堂'\r\n      ],\r\n      placeholder: '',\r\n      products: {\r\n        list: [],\r\n        page: 1,\r\n        total_pages: 1,\r\n        limit: 10\r\n      },\r\n      consultants: {\r\n        list: [],\r\n        page: 1,\r\n        total_pages: 1,\r\n        limit: 10\r\n      },\r\n      classes: {\r\n        list: [],\r\n        page: 1,\r\n        total_pages: 1,\r\n        limit: 10\r\n      },\r\n      target_name: ''\r\n    }\r\n  },\r\n  computed: {\r\n    tab_list: function () {\r\n      return this.tabs[this.type]\r\n    },\r\n    target: function () {\r\n      let val = this.tab_list[this.tab_index].target\r\n      this.target_name = val\r\n      return this[val]\r\n    }\r\n  },\r\n  onLoad () {\r\n    Object.assign(this, this.$options.data())\r\n  },\r\n  mounted () {\r\n    this.type = Number(this.$root.$mp.query.type)\r\n    this.placeholder = this.placeholders[this.type]\r\n  },\r\n  methods: {\r\n    clickTab (index) {\r\n      if (this.search_val) {\r\n        if (this.target.list.length === 0) {\r\n          this.search()\r\n        }\r\n      }\r\n    },\r\n    onSearch (val) {\r\n      // 每次更换搜索词时，重新搜索\r\n      if (this.search_val !== val) {\r\n        this.search_val = val\r\n        this.products.list = []\r\n        this.consultants.list = []\r\n        this.classes.list = []\r\n        this.search()\r\n      }\r\n    },\r\n    async search () {\r\n      let api = 'search' + this.target_name.substring(0, 1).toUpperCase() + this.target_name.substring(1)\r\n      console.log('api', api)\r\n      let args = {\r\n        url: this.api(api),\r\n        data: {\r\n          keywords: this.search_val,\r\n          page: this.target.page,\r\n          limit: this.target.limit\r\n        },\r\n        loading: true,\r\n        title: '搜索中...'\r\n      }\r\n      let res = await this.get(args)\r\n      if (res.status) {\r\n        let re = res.data\r\n        if (this.target_name === 'classes') {\r\n          this.target.list = this.target.list.concat(re.items)\r\n        } else {\r\n          this.target.list = this.target.list.concat(re[this.target_name])\r\n        }\r\n        this.target.total_pages = re.total_pages\r\n      } else {\r\n        this.$toast(res.msg)\r\n      }\r\n    },\r\n    loadMore () {\r\n      if (this.target.total_pages > this.target.page) {\r\n        this.target.page++\r\n        this.search()\r\n      }\r\n    }\r\n  },\r\n  onReachBottom () {\r\n    this.loadMore()\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.search {\r\n\t.list {\r\n\t\tmargin: 20rpx 24rpx;\r\n\t\tflex: 1;\r\n\t}\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&id=d7114c52&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&id=d7114c52&lang=less&scoped=true&\""],"sourceRoot":""}