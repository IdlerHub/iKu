(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mall/detail/main"],{153:
/*!*****************************************************************************************************!*\
  !*** C:/Users/Idler/Documents/HBuilderProjects/iKu/main.js?{"page":"pages%2Fmall%2Fdetail%2Fmain"} ***!
  \*****************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";(function(e){n(/*! uni-pages */4);o(n(/*! vue */2));var t=o(n(/*! ./pages/mall/detail/main.vue */154));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},154:
/*!********************************************************************************!*\
  !*** C:/Users/Idler/Documents/HBuilderProjects/iKu/pages/mall/detail/main.vue ***!
  \********************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";n.r(t);var o=n(/*! ./main.vue?vue&type=template&id=91fea896&scoped=true& */155),i=n(/*! ./main.vue?vue&type=script&lang=js& */157);for(var r in i)"default"!==r&&function(e){n.d(t,e,(function(){return i[e]}))}(r);n(/*! ./main.vue?vue&type=style&index=0&id=91fea896&lang=less&scoped=true& */160);var a,s=n(/*! ../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */16),u=Object(s["default"])(i["default"],o["render"],o["staticRenderFns"],!1,null,"91fea896",null,!1,o["components"],a);u.options.__file="pages/mall/detail/main.vue",t["default"]=u.exports},155:
/*!***************************************************************************************************************************!*\
  !*** C:/Users/Idler/Documents/HBuilderProjects/iKu/pages/mall/detail/main.vue?vue&type=template&id=91fea896&scoped=true& ***!
  \***************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,n){"use strict";n.r(t);var o=n(/*! -!../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=template&id=91fea896&scoped=true& */156);n.d(t,"render",(function(){return o["render"]})),n.d(t,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(t,"components",(function(){return o["components"]}))},156:
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/Idler/Documents/HBuilderProjects/iKu/pages/mall/detail/main.vue?vue&type=template&id=91fea896&scoped=true& ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,n){"use strict";var o;n.r(t),n.d(t,"render",(function(){return i})),n.d(t,"staticRenderFns",(function(){return a})),n.d(t,"recyclableRender",(function(){return r})),n.d(t,"components",(function(){return o}));try{o={uParse:function(){return Promise.all(/*! import() | components/u-parse/u-parse */[n.e("common/vendor"),n.e("components/u-parse/u-parse")]).then(n.bind(null,/*! @/components/u-parse/u-parse.vue */602))}}}catch(s){if(-1===s.message.indexOf("Cannot find module")||-1===s.message.indexOf(".vue"))throw s;console.error(s.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.args_modal_show=!0},e.e1=function(t){e.args_modal_show=!1})},r=!1,a=[];i._withStripped=!0},157:
/*!*********************************************************************************************************!*\
  !*** C:/Users/Idler/Documents/HBuilderProjects/iKu/pages/mall/detail/main.vue?vue&type=script&lang=js& ***!
  \*********************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";n.r(t);var o=n(/*! -!../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js& */158),i=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},158:
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/Idler/Documents/HBuilderProjects/iKu/pages/mall/detail/main.vue?vue&type=script&lang=js& ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(/*! ./node_modules/@babel/runtime/regenerator */10)),i=r(n(/*! @/assets/mixins/samePage */159));function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,o,i,r,a){try{var s=e[r](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(o,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var r=e.apply(t,n);function s(e){a(r,o,i,s,u,"next",e)}function u(e){a(r,o,i,s,u,"throw",e)}s(void 0)}))}}var u=function(){n.e(/*! require.ensure | components/common/swiper/swiper-video */"components/common/swiper/swiper-video").then(function(){return resolve(n(/*! @/components/common/swiper/swiper-video */610))}.bind(null,n)).catch(n.oe)},c=function(){n.e(/*! require.ensure | components/common/tab/tab */"components/common/tab/tab").then(function(){return resolve(n(/*! @/components/common/tab/tab */525))}.bind(null,n)).catch(n.oe)},d=function(){n.e(/*! require.ensure | components/mall/goodsDetail/recommendGoodsItem */"components/mall/goodsDetail/recommendGoodsItem").then(function(){return resolve(n(/*! @/components/mall/goodsDetail/recommendGoodsItem */617))}.bind(null,n)).catch(n.oe)},l=function(){n.e(/*! require.ensure | components/mall/goodsDetail/recommendLessonItem */"components/mall/goodsDetail/recommendLessonItem").then(function(){return resolve(n(/*! @/components/mall/goodsDetail/recommendLessonItem */624))}.bind(null,n)).catch(n.oe)},p=function(){n.e(/*! require.ensure | components/mall/goodsDetail/argumentsModal */"components/mall/goodsDetail/argumentsModal").then(function(){return resolve(n(/*! @/components/mall/goodsDetail/argumentsModal */631))}.bind(null,n)).catch(n.oe)},g=function(){n.e(/*! require.ensure | components/mall/goodsDetail/guigePopup */"components/mall/goodsDetail/guigePopup").then(function(){return resolve(n(/*! @/components/mall/goodsDetail/guigePopup */638))}.bind(null,n)).catch(n.oe)},f=function(){n.e(/*! require.ensure | components/mall/goodsDetail/packageGuigePopup */"components/mall/goodsDetail/packageGuigePopup").then(function(){return resolve(n(/*! @/components/mall/goodsDetail/packageGuigePopup */645))}.bind(null,n)).catch(n.oe)},m=function(){n.e(/*! require.ensure | components/common/menu/share */"components/common/menu/share").then(function(){return resolve(n(/*! @/components/common/menu/share */419))}.bind(null,n)).catch(n.oe)},_=function(){n.e(/*! require.ensure | components/common/menu/profile */"components/common/menu/profile").then(function(){return resolve(n(/*! @/components/common/menu/profile */652))}.bind(null,n)).catch(n.oe)},h=function(){n.e(/*! require.ensure | components/common/button/button */"components/common/button/button").then(function(){return resolve(n(/*! @/components/common/button/button */553))}.bind(null,n)).catch(n.oe)},v=function(){Promise.all(/*! require.ensure | components/u-parse/u-parse */[n.e("common/vendor"),n.e("components/u-parse/u-parse")]).then(function(){return resolve(n(/*! @/components/u-parse/u-parse.vue */602))}.bind(null,n)).catch(n.oe)},w={mixins:[i.default],components:{Swiper:u,Tab:c,RecommendGoodsItem:d,RecommendLessonItem:l,ArgumentsModal:p,GuigePopup:g,PackageGuigePopup:f,MenuShare:m,MenuProfile:_,Btn:h,uParse:v},data:function(){return{imgProcess:this.$imgProcess,loading:!0,product_sn:0,goods_id:0,swiper_list:[],detail:"",tab_list:[{name:"推荐商品"},{name:"推荐课程"}],tab_index:0,recommend_goods:[],recommend_lessons:[],cart_num:0,args_modal_show:!1,guige_type:0,guige_popup_show:!1,guige_open_type:0,group_money:0,group_need:0,max:100,group_detail:"",uid:"",identity:""}},mounted:function(){this.product_sn=this.$root.$mp.query.product_sn,this.getGoodsDetail(),this.getGroupDetail()},onShow:function(){this.getCartList(),this.getUid();var e=wx.getStorageSync("identity");this.identity=e||this.identity},methods:{pauseDetailVideo:function(){if(this.detail.content_video){var e=wx.createVideoContext("detailVideo");e.pause()}console.log("stop")},onPlay:function(){this.$refs["swiperVideo"]&&this.$refs["swiperVideo"].pauseAll()},getUid:function(){var e=this;wx.getStorage({key:"uid",success:function(t){e.uid=t.data}})},openGuigePopup:function(e){this.guige_popup_show=!0,this.guige_open_type=e},toCertification:function(){e.navigateTo({url:"/pages/mall/certification/main?id=".concat(this.product_sn)})},getGroupDetail:function(){var e=this,t={url:this.api("getGoodGroupDetail"),data:{product_sn:this.product_sn},loading:this.loading};this.get(t).then((function(t){e.group_money=t.data.group_detail.group_price,e.group_need=t.data.group_detail.group_needs,e.group_detail=t.data.group_detail;var n=[];if(t.data.imgs&&t.data.imgs.forEach((function(e){var t={img:"".concat(e.url)};n.push(t)})),t.data.video){var o={isVideo:!0,video:t.data.video,video_poster:t.data.video_thumb,img:""};n.unshift(o)}if(t.data.video_2){var i={isVideo:!0,video:t.data.video_2,video_poster:t.data.video_thumb2,img:""};n.unshift(i)}e.swiper_list=n}))},getGuige:function(t){var n=this;return s(o.default.mark((function i(){var r,a,s,u,c,d;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(1!==parseInt(n.detail.is_show)){o.next=21;break}if(2!==parseInt(n.guige_type)){o.next=9;break}if(3!==t){o.next=5;break}return n.$refs["packageDom"].toTeam(),o.abrupt("return");case 5:r=3===t?1:0,n.openGuigePopup(r),o.next=19;break;case 9:if(3!==t){o.next=12;break}return n.joinTeam(),o.abrupt("return");case 12:return e.showLoading(),a=e.getStorageSync("loginUserinfo")?e.getStorageSync("loginUserinfo").openId:"",s={url:n.api("getProductGuige"),data:{goods_id:n.goods_id,goods_num:1,spec_id:"",open_id:a}},o.next=17,n.get(s);case 17:u=o.sent,u.status?(c=u.data,c.goods_spec.length>1?(d=3===t?1:0,n.openGuigePopup(d)):c.goods_spec[0].store>0?c.goods_spec[0].restricted_num-c.goods_spec[0].order_count>0?(1===t&&n.addCart(c.spec_id),2===t&&n.toComfirm(c.spec_id)):n.$toast("您好，超过限购数量了！"):n.$toast("您好，库存不够了！")):n.$toast(u.msg);case 19:o.next=22;break;case 21:n.$toast("商品已下架");case 22:case"end":return o.stop()}}),i)})))()},addCart:function(e){var t=this;return s(o.default.mark((function n(){var i,r;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i={url:t.api("addProductGoods"),data:{goods_id:t.goods_id,goods_num:1,spec_id:e}},n.next=3,t.post(i);case 3:r=n.sent,r.status?(t.$emit("updateCart"),t.$toast("成功加入购物车","success")):t.$toast(r.msg);case 5:case"end":return n.stop()}}),n)})))()},toComfirm:function(e){var t=this;return s(o.default.mark((function e(){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.openGuigePopup(0);case 1:case"end":return e.stop()}}),e)})))()},joinTeam:function(){var e=this;return s(o.default.mark((function t(){var n,i,r,a;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={url:e.api("groupConfirmOrder"),data:{goods_id:e.goods_id,coupon_instance_id:"",group_head_order_sn:""},loading:!0},t.next=3,e.get(n);case 3:i=t.sent,i.status?(console.log(i),r=i.data,a={goods_id:e.goods_id,goods_num:1,spec_id:"",total_price:r.total_price,is_group:1,group_head_order_sn:"",is_coupon:r.group_detail.is_coupon},e.$nav("productConfirm",a)):e.$toast(i.msg),e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},getGoodsDetail:function(e){var t=this;return s(o.default.mark((function n(){var i,r,a,s,u,c;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i={url:t.api("getGoodsDetail"),data:{product_sn:t.product_sn},loading:t.loading},n.next=3,t.get(i);case 3:r=n.sent,r.status?(a=r.data,"update"!==e&&(t.detail=a,t.goods_id=a.id,t.guige_type=Number(a.type),t.recommend_goods=a.recommend_goods?a.recommend_goods:[],t.recommend_lessons=a.recommend_class?a.recommend_class:[],s=[],a.imgs&&a.imgs.forEach((function(e){var t={img:"".concat(e.url)};s.push(t)})),a.video&&(u={isVideo:!0,video:a.video,video_poster:a.video_thumb,img:""},s.unshift(u)),a.video_2&&(c={isVideo:!0,video:a.video_2,video_poster:a.video_thumb2,img:""},s.unshift(c)),t.swiper_list=s)):t.$toast(r.msg),t.loading=!1;case 6:case"end":return n.stop()}}),n)})))()},getCartList:function(){var t=this;return s(o.default.mark((function n(){var i,r,a;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.getStorageSync("loginUserinfo")?e.getStorageSync("loginUserinfo").openId:"",r={url:t.api("getMyCartNum"),loading:!1,open_id:i},n.next=4,t.get(r);case 4:a=n.sent,t.cart_num=parseInt(a.data.shop_cart_goods_num)||0,a.status&&a.data&&parseInt(a.data.shop_cart_goods_num);case 7:case"end":return n.stop()}}),n)})))()}},watch:{guige_popup_show:function(){this.getCartList()},goods_id:function(e){this.$Tool.SetRecordParameter({page:"goods_list",content_type:"goods",content_id:e})}},onShareAppMessage:function(){return this.$Tool.SetRecordScene({page:"share",content_type:"share_page",content_id:this.detail.share_name||this.detail.product_name}),{title:this.detail.share_name||this.detail.product_name,path:"/pages/mall/detail/main?product_sn=".concat(this.product_sn,"&uid=").concat(this.uid,"&t=s")}},onUnload:function(){this.$Tool.SetBrowseID()}};t.default=w}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},160:
/*!******************************************************************************************************************************************!*\
  !*** C:/Users/Idler/Documents/HBuilderProjects/iKu/pages/mall/detail/main.vue?vue&type=style&index=0&id=91fea896&lang=less&scoped=true& ***!
  \******************************************************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";n.r(t);var o=n(/*! -!../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-oneOf-1-2!../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--10-oneOf-1-3!../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-oneOf-1-5!../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&id=91fea896&lang=less&scoped=true& */161),i=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},161:
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-oneOf-1-2!./node_modules/postcss-loader/src??ref--10-oneOf-1-3!./node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/Idler/Documents/HBuilderProjects/iKu/pages/mall/detail/main.vue?vue&type=style&index=0&id=91fea896&lang=less&scoped=true& ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,n){}},[[153,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/mall/detail/main.js.map