(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/team/main"],{353:
/*!********************************************************************************************!*\
  !*** C:/Users/Idler/Documents/HBuilderProjects/iKu/main.js?{"page":"pages%2Fteam%2Fmain"} ***!
  \********************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";(function(e){n(/*! uni-pages */4);r(n(/*! vue */2));var t=r(n(/*! ./pages/team/main.vue */354));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},354:
/*!*************************************************************************!*\
  !*** C:/Users/Idler/Documents/HBuilderProjects/iKu/pages/team/main.vue ***!
  \*************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";n.r(t);var r=n(/*! ./main.vue?vue&type=template&id=5be34c82&scoped=true& */355),o=n(/*! ./main.vue?vue&type=script&lang=js& */357);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var a,u=n(/*! ../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */16),s=Object(u["default"])(o["default"],r["render"],r["staticRenderFns"],!1,null,"5be34c82",null,!1,r["components"],a);s.options.__file="pages/team/main.vue",t["default"]=s.exports},355:
/*!********************************************************************************************************************!*\
  !*** C:/Users/Idler/Documents/HBuilderProjects/iKu/pages/team/main.vue?vue&type=template&id=5be34c82&scoped=true& ***!
  \********************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,n){"use strict";n.r(t);var r=n(/*! -!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=template&id=5be34c82&scoped=true& */356);n.d(t,"render",(function(){return r["render"]})),n.d(t,"staticRenderFns",(function(){return r["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return r["recyclableRender"]})),n.d(t,"components",(function(){return r["components"]}))},356:
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/Idler/Documents/HBuilderProjects/iKu/pages/team/main.vue?vue&type=template&id=5be34c82&scoped=true& ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,n){"use strict";var r;n.r(t),n.d(t,"render",(function(){return o})),n.d(t,"staticRenderFns",(function(){return a})),n.d(t,"recyclableRender",(function(){return i})),n.d(t,"components",(function(){return r}));var o=function(){var e=this,t=e.$createElement;e._self._c},i=!1,a=[];o._withStripped=!0},357:
/*!**************************************************************************************************!*\
  !*** C:/Users/Idler/Documents/HBuilderProjects/iKu/pages/team/main.vue?vue&type=script&lang=js& ***!
  \**************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";n.r(t);var r=n(/*! -!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../MyProgram/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js& */358),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=o.a},358:
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/Idler/Documents/HBuilderProjects/iKu/pages/team/main.vue?vue&type=script&lang=js& ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(/*! ./node_modules/@babel/runtime/regenerator */10));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){s(i,r,o,a,u,"next",e)}function u(e){s(i,r,o,a,u,"throw",e)}a(void 0)}))}}var d=function(){n.e(/*! require.ensure | components/team/stepFlow */"components/team/stepFlow").then(function(){return resolve(n(/*! @/components/team/stepFlow */897))}.bind(null,n)).catch(n.oe)},p=function(){n.e(/*! require.ensure | components/team/product-info */"components/team/product-info").then(function(){return resolve(n(/*! @/components/team/product-info */904))}.bind(null,n)).catch(n.oe)},_=function(){n.e(/*! require.ensure | components/team/team-people */"components/team/team-people").then(function(){return resolve(n(/*! @/components/team/team-people */911))}.bind(null,n)).catch(n.oe)},l=function(){n.e(/*! require.ensure | components/team/team-history */"components/team/team-history").then(function(){return resolve(n(/*! @/components/team/team-history */918))}.bind(null,n)).catch(n.oe)},f={components:{stepFlow:d,productInfo:p,teamPeople:_,teamHistory:l},data:function(){return{page_show:!1,order_sn:"",group_head_order_sn:"",product_info:{},group_status:0,join_list:[],remain_time:0,last_people_number:0,is_join:0,time_interval:null}},methods:{joinGroup:function(){var e=this;return c(r.default.mark((function t(){var n;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.$root.$mp.query.product_type,Number(n)?e.packageJump():e.productJump();case 2:case"end":return t.stop()}}),t)})))()},productJump:function(){var e=this;return c(r.default.mark((function t(){var n,o,i,a;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={url:e.api("groupConfirmOrder"),data:{goods_id:e.product_info.goods_id,coupon_instance_id:"",group_head_order_sn:e.group_head_order_sn},loading:!0},t.next=3,e.get(n);case 3:o=t.sent,o.status?(i=o.data,a={goods_id:e.product_info.goods_id,goods_num:1,spec_id:"",address:JSON.stringify(i.address),goods_list:JSON.stringify(i.goods_list||[]),total_price:i.total_price,is_group:1,coupon_list:JSON.stringify(i.coupon.coupon_instance||[]),group_head_order_sn:e.group_head_order_sn,is_coupon:i.group_detail.is_coupon},e.$nav("productConfirm",a)):e.$toast(o.msg);case 5:case"end":return t.stop()}}),t)})))()},packageJump:function(){wx.setStorage({key:"package_ids",data:[]}),this.$nav("packageConfirm",{goods_id:this.product_info.goods_id,is_group:1,group_head_order_sn:this.group_head_order_sn})},getGroupData:function(){var t=this,n=this.$root.$mp.query.group_head_order_sn;console.log("发送团单号",n),this.get({url:this.api("getGroupDetail"),data:{group_head_order_sn:n}}).then((function(n){console.log(n),e.hideLoading();var r=n.data.group_product_detail;if(t.product_info={goods_id:r.product_id,product_name:r.product_name,product_thumb:r.thumb,group_price:r.group_price,goods_num:r.goods_num,group_needs:r.group_needs},t.last_people_number=Number(n.data.group_detail.group_needs)-Number(n.data.group_detail.joined),t.order_sn=n.data.my_join_order_sn,t.group_head_order_sn=n.data.group_head_order_sn,t.group_status=Number(n.data.group_status),t.join_list=n.data.group_detail.join_list.map((function(e){return a(a({},e),{},{is_leader:Number(e.is_leader)})})),t.page_show=!0,1===t.group_status){console.log("开启倒计时");var o=Number(n.data.group_detail.group_expire),i=Date.parse(new Date)/1e3,u=o-i||0;u>0&&(t.remain_time=parseInt(u),t.time_interval=setInterval((function(){t.remain_time--,0===t.remain_time&&clearInterval(t.time_interval)}),1e3))}}))}},onShow:function(){var t=this;clearInterval(this.time_interval),this.page_show=!1,e.showLoading(),setTimeout((function(){t.getGroupData()}),2e3),this.is_join=this.$root.$mp.query.is_join?1:0,console.log(this.$root.$mp.query)},onShareAppMessage:function(){this.$Tool.SetRecordScene({page:"share",content_type:"share_page",content_id:"分享页面"});var e=this.$root.$mp.query,t=e.group_head_order_sn,n=e.product_type;return{path:"/pages/team/main?group_head_order_sn=".concat(t,"&product_type=").concat(n,"&is_join=1")}},onHide:function(){clearInterval(this.time_interval)},onUnload:function(){clearInterval(this.time_interval)}};t.default=f}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])}},[[353,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/team/main.js.map